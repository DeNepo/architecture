<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>list: 2</title>
  </head>
  <body>
    <div id="root">
      <!-- 2. display items -->
      <div id="list-root"></div>
    </div>

    <script type="module">
      // --- 0. initialize state ---

      import { initialize } from '../../../data-access/initialize.js';

      const data = {
        nextId: 2,
        items: [{ id: 1, text: 'hello' }],
      };
      initialize(data);

      // --- business logic ---

      import { save } from '../../../data-access/save.js';
      import { find } from '../../../data-access/find.js';

      // 1. display items
      const getItems = () => {
        return find('items');
      };

      // --- components ---

      // 2. display items
      const renderList = (items = []) => {
        const ulEl = document.createElement('ul');
        for (const item of items) {
          const liEl = document.createElement('li');
          liEl.innerHTML = item.text;
          ulEl.appendChild(liEl);
        }
        return ulEl;
      };

      // --- handlers ---

      // 2. display items
      const initializeUI = () => {
        const listEl = renderList(getItems());
        document.getElementById('list-root').appendChild(listEl);
      };

      // --- listeners ---

      // 2. display items
      window.addEventListener('DOMContentLoaded', initializeUI);
    </script>
  </body>
</html>
